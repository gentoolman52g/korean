제품 요구사항 정의서 (PRD - Product Requirements Document)

1. 개요 및 목표
1.1. 배경:
사내 AI 자동화 앱 '미소' 및 RAG 시스템의 지식 베이스 구축을 위해, 임직원들이 보유한 다양한 형태의 문서(법령, 엑셀, 논문 등)를 정제된 텍스트 데이터로 변환해야 합니다.
RAG 시스템의 검색 정확도와 답변 품질은 입력되는 데이터의 정제 수준과 청킹(Chunking) 전략에 크게 좌우됩니다.

1.2. 문제 정의:
다양한 포맷(PDF, Excel, HWP 등)의 원본 문서는 불필요한 서식, 반복되는 헤더/푸터, 깨진 문자 등을 포함하고 있어 RAG 시스템에 바로 등록하기 어렵습니다.
문서의 구조(표, 조항, 섹션)를 무시하고 단순 문자 수로만 자를 경우, 문맥이 끊겨 검색 품질이 저하됩니다.

1.3. 목표:
사용자가 파일을 직접 업로드하면, 문서 유형(법령, 엑셀, 논문 등)에 최적화된 방식으로 텍스트를 추출, 전처리, 청킹하는 웹 서비스를 제공합니다.
시각화 도구를 통해 전처리 결과를 직관적으로 검토하고 수정하여 고품질의 RAG 데이터를 생성합니다.

2. 사용자 및 사용 시나리오
2.1. 주요 사용자: RAG 시스템에 데이터를 등록하고자 하는 관리자 및 임직원

2.2. 사용자 시나리오 (User Flow):
1. 사용자는 전처리 시스템 웹 페이지에 접속하여 파일을 업로드합니다.
2. 시스템은 파일 확장자를 분석하여 텍스트를 추출하고(자체 처리 또는 Miso API 연동), 적절한 문서 유형(법령, 엑셀 등)을 제안합니다.
3. 사용자는 추출된 원본 텍스트를 확인하고, 문서 유형을 확정한 뒤 '전처리 시작'을 클릭합니다.
4. 시스템은 선택된 유형에 맞춰 노이즈 제거, 구조적 청킹을 수행합니다.
5. 사용자는 전처리된 텍스트와 시각화된 청크 흐름(Flow Viewer)을 확인하고, 필요 시 내용을 수정합니다.
6. 검토가 완료되면 '다운로드' 버튼을 클릭하여 RAG 등록용 포맷(@@@ 구분자 포함)의 .txt 파일을 내려받습니다.

3. 기능 요구사항

| ID | 기능명 | 상세 설명 | 우선순위 |
| :--- | :--- | :--- | :--- |
| **FR-01** | **파일 업로드 및 텍스트 추출** | - 다양한 포맷(PDF, Excel, Word, HWP 등)의 파일 업로드 지원<br>- Excel: 시트별 데이터 보존 및 마크다운 표 변환<br>- 일반 문서: Miso API 등을 활용한 텍스트 추출<br>- 대용량 파일(50MB) 처리 지원 | 필수 |
| **FR-02** | **문서 유형별 전처리** | - **공통**: 중복 문단 제거, 공백/줄바꿈 정규화, 불용 문자 제거<br>- **법령**: '제N조' 단위 구조 인식 및 보존<br>- **논문**: 반복되는 페이지 헤더/푸터 자동 제거, 섹션 구조 인식<br>- **엑셀**: 헤더 행 보존, 시트 단위 구분 | 필수 |
| **FR-03** | **구조적 청킹 (Chunking)** | - 문서 구조(문단, 조항, 표)를 고려한 의미 단위 분할<br>- 최대 길이(예: 4000자) 제한 및 오버랩(Overlap) 적용<br>- 청크 간 '@@@' 구분자 삽입 | 필수 |
| **FR-04** | **편집 및 검토 UI** | - 전처리 전/후 텍스트를 비교/수정할 수 있는 듀얼 뷰(Dual View) 제공<br>- 문서 유형 선택(라디오 버튼) 인터페이스<br>- 처리 상태(로딩, 완료, 에러)에 따른 피드백 제공 | 필수 |
| **FR-05** | **청크 시각화 (Visualization)** | - **Flow Viewer**: 청크 간의 흐름을 시각적으로 보여주는 뷰어<br>- **Chunk Modal**: 개별 청크의 내용을 상세히 확인하는 모달 창 | 필수 |
| **FR-06** | **결과 다운로드** | - 최종 검토된 텍스트를 .txt 파일로 다운로드<br>- 파일명 자동 생성 (예: `[전처리] 원본파일명.txt`) | 필수 |

4. 비기능 요구사항
| ID | 항목 | 상세 설명 |
| :--- | :--- | :--- |
| NFR-01 | 성능 | - 50MB 이내의 파일 처리는 수 초~수십 초 내에 완료되어야 함 (외부 API 의존성 제외) |
| NFR-02 | 사용성 | - 복잡한 설정 없이 파일 업로드 -> 클릭 -> 다운로드의 단순한 흐름 유지 |
| NFR-03 | 확장성 | - 향후 새로운 문서 유형이나 전처리 로직 추가가 용이한 구조(Strategy Pattern 등) 유지 |

5. 범위 외 (Out of Scope)
- 사용자 로그인/회원가입 (사내망 접속 가정 또는 별도 인증 게이트웨이)
- HWP 파일의 직접 파싱 (Miso API에 위임)
- RAG 벡터 DB에 대한 직접 적재 (파일 다운로드까지만 담당)
