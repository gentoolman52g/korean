# 제품 기능 명세서 (Product Specifications)

## 1. 개요
본 문서는 RAG 시스템을 위한 비정형 텍스트 데이터 전처리 애플리케이션의 기능 명세를 정의합니다.
사용자는 다양한 문서를 업로드하여 정제된 청크(Chunk) 데이터를 생성하고 시각적으로 검증할 수 있습니다.

## 2. 시스템 아키텍처 및 워크플로우

### 2.1 User Flow
1. **파일 업로드**: 사용자가 문서를 드래그 앤 드롭으로 업로드
2. **텍스트 확인**: 추출된 원본 텍스트 확인 및 1차 편집
3. **설정 및 전처리**: 문서 유형(법령, 논문 등) 선택 후 전처리 실행
4. **결과 검토 및 저장**: 청크 시각화 확인, 최종 텍스트 수정 후 다운로드

### 2.2 핵심 모듈
- **Frontend**: Next.js 기반의 SPA. 모든 전처리 로직은 클라이언트(브라우저) 및 Web Worker에서 수행하여 보안성을 높임.
- **Preprocessor Engine**: `lib/text-preprocessor.ts`에 정의된 전략 패턴 기반의 텍스트 처리기.

## 3. 상세 기능 명세

### 3.1 파일 처리 (File Processing)
| 기능 ID | 기능명 | 구현 상태 | 상세 설명 |
| :--- | :--- | :--- | :--- |
| **F-01** | **다중 포맷 지원** | ✅ 완료 | txt, md, json, csv, log, pdf, xlsx 등 지원 |
| **F-02** | **대용량 처리** | ✅ 완료 | Web Worker를 통한 UI 블로킹 없는 비동기 텍스트 추출 |
| **F-03** | **Excel 파싱** | ✅ 완료 | 시트별 분리, 2차원 데이터를 마크다운 표 포맷으로 변환 |

### 3.2 전처리 및 청킹 (Preprocessing & Chunking)
| 기능 ID | 기능명 | 구현 상태 | 상세 설명 |
| :--- | :--- | :--- | :--- |
| **P-01** | **법령 모드** | ✅ 완료 | '제N조', '제N항' 구조를 인식하여 조항 단위로 청킹. 법적 문맥 보존. |
| **P-02** | **논문/보고서 모드** | ✅ 완료 | 페이지 헤더/푸터(반복 텍스트) 자동 제거, 계층적 섹션 번호 인식. |
| **P-03** | **스마트 청킹** | ✅ 완료 | 문단 > 문장 > 마침표 순의 재귀적 분할(Recursive Split). |
| **P-04** | **오버랩(Overlap)** | ✅ 완료 | 청크 간 문맥 단절 방지를 위한 텍스트 겹침 처리 (기본 설정 지원). |
| **P-05** | **구분자 삽입** | ✅ 완료 | RAG 인덱싱을 위한 커스텀 구분자(예: `@@@`) 자동 삽입. |

### 3.3 UI/UX 및 시각화
| 기능 ID | 기능명 | 구현 상태 | 상세 설명 |
| :--- | :--- | :--- | :--- |
| **U-01** | **Progress Stepper** | ✅ 완료 | 4단계(업로드-확인-처리-검토) 진행 상태바 제공. |
| **U-02** | **Chunk Flow Viewer** | ✅ 완료 | 생성된 청크들의 연결 관계를 노드 그래프 형태로 시각화. |
| **U-03** | **양방향 편집** | ✅ 완료 | Markdown 미리보기와 Raw 텍스트 편집 모드 전환 지원. |
| **U-04** | **텍스트 미러링** | ✅ 완료 | 미리보기 클릭 시 해당 원본 텍스트 위치로 스크롤 자동 이동. |

## 4. 향후 개선 계획 (Backlog)
- [ ] **AI 기반 자동 분류**: 문서 내용을 분석하여 문서 유형을 자동으로 추천하는 기능
- [ ] **벡터 DB 연동**: 다운로드 없이 Pinecone/Weaviate 등으로 즉시 업로드
- [ ] **전처리 프리셋 저장**: 자주 사용하는 전처리 설정을 프로필로 저장
